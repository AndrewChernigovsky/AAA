var e=document.querySelector(".cost__steps p"),t=document.querySelector(".cost__line"),n=document.querySelector(".cost__line--active"),o=document.querySelectorAll(".swiper-cost .swiper-slide"),c=document.querySelector("#step-back"),r=document.querySelector("#cost"),i=document.querySelector("#password-hash"),s=document.querySelector(".popup"),a=document.getElementById("inputRange"),l=document.getElementById("total-cost");function u(){var e=a.value;l.value=e;var t=(e-a.min)/(a.max-a.min)*100;a.style.background="linear-gradient(90deg, ".concat("#ff7300"," ").concat(t,"%, ").concat("#4b4747"," ").concat(t,"%)")}function d(){var c,r;e.textContent="Шаг ".concat(swiperCost.realIndex+1,"/").concat(o.length),c=t.offsetWidth,r=o.length,swiperCost.realIndex===r-1?n.style.width="100%":swiperCost.realIndex>0?(n.style.width=c/r*swiperCost.realIndex+"px",console.log(n.style.width,"width")):n.style.width="0px"}function p(){o[swiperCost.realIndex].querySelectorAll('input[type="radio"], input[type="checkbox"], input[type="range"]').forEach((function(e){e.addEventListener("change",(function(){"range"==e.type&&swiperCost.slideNext(),e.checked&&swiperCost.slideNext()}))}))}function h(){d(),u(),p(),r.addEventListener("submit",(function(e){e.preventDefault();var t=grecaptcha.getResponse();if(0!==t.length&&(s.classList.add("active"),s.querySelector("h3").textContent="Нужно пройти капчу"),0===i.value.length&&0!==t.length){var n=new FormData(this);fetch("./../../functions/mail/mail.php",{method:"POST",body:n}).then((function(e){if(!e.ok)throw new Error("Network response was not ok");s.classList.add("active"),s.querySelector("h3").textContent="Данные успешно  отправлены!",s.querySelector("p").textContent="Сообщение закроется через 3 секунды",setTimeout((function(){return s.classList.remove("active")}),3e3)})).catch((function(e){return console.error("Ошибка:",e)}))}})),c.addEventListener("click",(function(){swiperCost.slidePrev()})),swiperCost.on("slideChange",(function(){d(),u(),p()}))}a.addEventListener("input",(function(){l.value=this.value})),a.addEventListener("input",u);export{h as initCost};
