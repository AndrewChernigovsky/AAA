var e=document.querySelector("#form"),t=document.querySelector("#password-hash"),n=document.querySelector(".popup");function r(){var r=e.querySelector("input[name='user-tel']"),o=e.querySelectorAll("input[name='social']");e.addEventListener("submit",(function(e){e.preventDefault();var s=grecaptcha.getResponse();if(console.log(s.length,"length"),0===s.length)return n.classList.add("active"),n.querySelector("h3").textContent="Нужно пройти капчу",void setTimeout((function(){return n.classList.remove("active")}),3e3);var a,c=(a=!1,o.forEach((function(e){e.checked&&(a=!0)})),{phoneValid:r.value.length>0,messengerValid:a});if(0===t.value.length&&c.phoneValid&&c.messengerValid){var i=new FormData(this);fetch("./php/functions/mail/mail-simple.php",{method:"POST",body:i}).then((function(e){if(!e.ok)throw new Error("Network response was not ok");n.classList.add("active"),n.querySelector("h3").textContent="Данные успешно отправлены!",n.querySelector("p").textContent="Сообщение закроется через 3 секунды",setTimeout((function(){return n.classList.remove("active")}),3e3),grecaptcha.reset()})).catch((function(e){return console.error("Ошибка:",e)}))}else c.phoneValid||(n.classList.add("active"),n.querySelector("h3").textContent="Введите номер телефона",setTimeout((function(){return n.classList.remove("active")}),3e3)),c.messengerValid||(n.classList.add("active"),n.querySelector("h3").textContent="Выберите мессенджер",setTimeout((function(){return n.classList.remove("active")}),3e3))}))}function o(){if(e){var t=e.querySelector("input[name='user-tel']");Inputmask({mask:"+7 (999) 999-99-99"}).mask(t),r()}}export{o as initFormSimple};
