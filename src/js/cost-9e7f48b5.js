var e=document.querySelector("#cost"),t=document.querySelector(".cost__steps p"),n=document.querySelector(".cost__line"),o=document.querySelector(".cost__line--active"),r=document.querySelectorAll(".swiper-cost .swiper-slide"),c=document.querySelector("#step-back"),s=document.querySelector("#password-hash"),i=document.querySelector(".popup"),a=document.getElementById("inputRange"),u=document.getElementById("total-cost");function l(){var e=a.value;u.value=e;var t=(e-a.min)/(a.max-a.min)*100;a.style.background="linear-gradient(90deg, ".concat("#ff7300"," ").concat(t,"%, ").concat("#4b4747"," ").concat(t,"%)")}function d(){var e,c;t.textContent="Шаг ".concat(swiperCost.realIndex+1,"/").concat(r.length),e=n.offsetWidth,c=r.length,swiperCost.realIndex===c-1?o.style.width="100%":swiperCost.realIndex>0?(o.style.width=e/c*swiperCost.realIndex+"px",console.log(o.style.width,"width")):o.style.width="0px"}function p(){r[swiperCost.realIndex].querySelectorAll('input[type="radio"], input[type="checkbox"], input[type="range"]').forEach((function(e){e.addEventListener("change",(function(){"range"==e.type&&swiperCost.slideNext(),e.checked&&swiperCost.slideNext()}))}))}function h(){if(e){var t=document.querySelector("input[name='user-tel']");Inputmask({mask:"+7 (999) 999-99-99"}).mask(t),a.addEventListener("input",(function(){u.value=this.value,l()})),d(),l(),p(),e.addEventListener("submit",(function(e){if(e.preventDefault(),0===grecaptcha.getResponse().length)return i.classList.add("active"),i.querySelector("h3").textContent="Нужно пройти капчу",void setTimeout((function(){return i.classList.remove("active")}),3e3);if(0===s.value.length){var t=new FormData(this);fetch("./php/functions/mail/mail.php",{method:"POST",body:t}).then((function(e){if(!e.ok)throw new Error("Network response was not ok");i.classList.add("active"),i.querySelector("h3").textContent="Данные успешно отправлены!",i.querySelector("p").textContent="Сообщение закроется через 3 секунды",setTimeout((function(){return i.classList.remove("active")}),3e3),grecaptcha.reset()})).catch((function(e){return console.error("Ошибка:",e)}))}})),c.addEventListener("click",(function(){swiperCost.slidePrev()})),swiperCost.on("slideChange",(function(){d(),l(),p()}))}}export{h as initCost};
